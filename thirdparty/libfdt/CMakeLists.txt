INCLUDE(${BOARD_CMAKE_DIR}/toolchain.cmake)

SET(CMAKE_C_FLAGS "${COMMON_C_FLAGS}")
SET(CMAKE_CXX_FLAGS "${COMMON_CXX_FLAGS}")
SET(CMAKE_EXE_LINKER_FLAGS "${LDFLAGS}")

# - Add user project to CMake project
INCLUDE_DIRECTORIES(${GNU_EFI_INC} ${GNU_EFI_INC}/${ARCH} ${COMMON_INC} .)

FILE(GLOB_RECURSE FDT_SRC "*.c" "*.cpp")
FILE(GLOB_RECURSE FDT_SRC_ASM "*.S")

SET_PROPERTY(SOURCE ${FDT_SRC_ASM} PROPERTY LANGUAGE C)
SET_SOURCE_FILES_PROPERTIES(${FDT_SRC_ASM} PROPERTIES COMPILE_FLAGS "-x assembler-with-cpp -D${ARCH}")

ADD_LIBRARY(fdt STATIC ${FDT_SRC} ${FDT_SRC_ASM})