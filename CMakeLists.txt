CMAKE_MINIMUM_REQUIRED(VERSION 3.0)
SET(CMAKE_C_COMPILER_WORKS 1)
SET(CMAKE_CXX_COMPILER_WORKS 1)
PROJECT(chino)

IF( NOT CMAKE_BUILD_TYPE )
    SET( CMAKE_BUILD_TYPE Debug)
ELSE()
    IF ((NOT CMAKE_BUILD_TYPE STREQUAL "Debug") AND (NOT CMAKE_BUILD_TYPE STREQUAL "Release"))
        MESSAGE(FATAL_ERROR "CMAKE_BUILD_TYPE must either be Debug or Release instead of ${CMAKE_BUILD_TYPE}")
    ENDIF()
ENDIF()

SET_PROPERTY(GLOBAL PROPERTY TARGET_SUPPORTS_SHARED_LIBS TRUE)
SET(COMMON_INC ${CMAKE_CURRENT_SOURCE_DIR}/thirdparty ${CMAKE_CURRENT_SOURCE_DIR}/thirdparty/common ${CMAKE_CURRENT_SOURCE_DIR}/src)
SET(FIRMWARE_DIR ${CMAKE_CURRENT_BINARY_DIR}/iso)

SET(BOARD_LDS_DIR ${CMAKE_CURRENT_SOURCE_DIR}/src/libbsp/${BOARD}/lds)
SET(BOARD_CMAKE_DIR ${CMAKE_CURRENT_SOURCE_DIR}/src/libbsp/${BOARD}/cmake)

SET(DRIVER_DIR ${CMAKE_CURRENT_SOURCE_DIR}/src/libdriver)
SET(TOOLS_DIR ${CMAKE_CURRENT_SOURCE_DIR}/tools)
SET(THIRDPARTY_DIR ${CMAKE_CURRENT_SOURCE_DIR}/thirdparty)

# Add subproject
ADD_SUBDIRECTORY(thirdparty)
ADD_SUBDIRECTORY(src)

INCLUDE(${BOARD_CMAKE_DIR}/firmware.cmake)